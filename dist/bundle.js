'use strict';Object.defineProperty(exports,'__esModule',{value:!0});var _lodash=require('lodash'),_lodash2=_interopRequireDefault(_lodash);function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}var lfc=function(a){function c(i,j){var k=i.type,l=i.name,m=i.value,n=i.checked,o=i.multiple,p=i.step,q=i.dataset,r=i.parentNode,s=i.tagName,t=q.type,u=q.separator,v=q.unique,w=r.name,x=r.value,y=r.multiple,z=r.tagName,A=r.dataset,B=r.selectedOptions,C=j?(l||w)+'['+(j-1)+']':l,D='OPTION'===s&&'SELECT'===z;if(j&&!_lodash2.default.get(h,l||w)&&'radio'!==k&&'SELECT'!==z&&_lodash2.default.set(h,l||w,[]),_lodash2.default.includes(['text','textarea'],k)){var F=t?convert({to:t,value:m,separator:_lodash2.default.get({text:u||',',textarea:u||'\n'},k)}):m;v&&(F=_lodash2.default.uniq(F)),_lodash2.default.set(h,C,F)}if(_lodash2.default.includes(['password','email','hidden','url','tel','color','month','week','time'],k)&&_lodash2.default.set(h,C,m),_lodash2.default.includes(['number','range'],k)&&_lodash2.default.set(h,C,p?_lodash2.default.round(m,_lodash2.default.chain(p).split('.').last().size()):_lodash2.default.toNumber(m)),_lodash2.default.includes(['radio'],k)&&n&&_lodash2.default.set(h,l,m),_lodash2.default.includes(['checkbox'],k)&&!j&&(_lodash2.default.eq(t,'boolean')?_lodash2.default.set(h,l,!!n):n&&_lodash2.default.set(h,l,m)),_lodash2.default.includes(['checkbox'],k)&&j){var E=_lodash2.default.get(h,l,[]);_lodash2.default.eq(t,'boolean')?_lodash2.default.set(h,l,_lodash2.default.concat(E,!!n)):n&&_lodash2.default.set(h,l,_lodash2.default.concat(E,m))}if(_lodash2.default.includes(['date','datetime-local'],k)&&_lodash2.default.set(h,C,_lodash2.default.eq(t,'string')?new Date(m).toISOString():new Date(m)),D&&x&&!y){var E=t||A.type;_lodash2.default.set(h,w,E?convert({to:E,value:x}):x)}if(D&&y){var E=[];_lodash2.default.each(B,function(F){E.push(convert({to:A.type,value:F.value}))}),A.flatten&&(E=_lodash2.default.flatten(E)),A.unique&&(E=_lodash2.default.chain(E).flatten().uniq().value()),_lodash2.default.set(h,r.name,E)}}var d=a.elements,e=a.tagName;if('FORM'!==e)throw new Error('first argument should be a form element');var f=_lodash2.default.chain(d).map('name').compact().uniq().value(),g=_lodash2.default.pick(d,f),h=_lodash2.default.stubObject();return _lodash2.default.each(g,function(i){_lodash2.default.isArrayLikeObject(i)?_lodash2.default.each(i,trimValue):trimValue(i)}),_lodash2.default.each(g,function(i){if(_lodash2.default.isArrayLikeObject(i)){var k=_lodash2.default.chain(i).reject('disabled').reject(function(l){var m=l.value;return _lodash2.default.isEmpty(m)}).value();_lodash2.default.each(k,function(l,m){return c(l,m+1)})}else i.value&&c(i)}),h};function trimValue(a){a.value=_lodash2.default.trim(a.value)}function convert(a){var b=a.to,c=a.value,d=a.decimal,e=a.separator,f=e===void 0?',':e;return{string:function string(){return c},number:function number(){return _lodash2.default.round(c,d)},array:function array(){return _lodash2.default.chain(c).split(f).compact().map(_lodash2.default.trim).value()},'[number]':function number(){return _lodash2.default.chain(c).split(f).map(function(h){return _lodash2.default.round(h,d)}).value()}}[b](c)}exports.default=lfc;

//# sourceMappingURL=bundle.js.map