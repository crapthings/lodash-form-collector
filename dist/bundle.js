'use strict';Object.defineProperty(exports,'__esModule',{value:!0});var _lodash=require('lodash'),_lodash2=_interopRequireDefault(_lodash);function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}var lfc=function(a){function c(i,j){var k=0<=j,l=i.type,m=i.name,n=i.value,o=i.checked,p=i.multiple,q=i.disabled,r=i.step,s=i.dataset,t=i.parentNode,u=i.tagName,v=s.type,w=s.separator,x=s.unique,y=s.skip,z=t.name,A=t.value,B=t.multiple,C=t.tagName,D=t.dataset,E=t.selectedOptions,F='OPTION'===u&&'SELECT'===C;if(k&&!_lodash2.default.get(h,m||z)&&'radio'!==l&&'SELECT'!==C&&_lodash2.default.set(h,m||z,[]),!(k&&''===n||q||y)){if(_lodash2.default.includes(['hidden','text','search','textarea'],l)){var G=v?convert({to:v,value:n,elementType:l}):n;x&&(G=_lodash2.default.uniq(G)),k?_lodash2.default.set(h,m,_lodash2.default.concat(_lodash2.default.get(h,m,[]),G)):G&&_lodash2.default.set(h,m,G)}if(_lodash2.default.includes(['tel','url','email','password','time','color','month','week'],l)&&(k?_lodash2.default.set(h,m,_lodash2.default.concat(_lodash2.default.get(h,m,[]),n)):n&&_lodash2.default.set(h,m,n)),_lodash2.default.includes(['number','range'],l)&&_lodash2.default.set(h,m,r?_lodash2.default.round(n,_lodash2.default.chain(r).split('.').last().size()):_lodash2.default.toNumber(n)),_lodash2.default.includes(['radio'],l)&&o&&(_lodash2.default.eq(v,'boolean')?_lodash2.default.set(h,m,'true'===n):_lodash2.default.set(h,m,v?convert({to:v,value:n}):n)),_lodash2.default.includes(['checkbox'],l)&&!k&&(_lodash2.default.eq(v,'boolean')?_lodash2.default.set(h,m,!!o):o&&_lodash2.default.set(h,m,v?convert({to:v,value:n}):n)),_lodash2.default.includes(['checkbox'],l)&&k){var G=_lodash2.default.get(h,m,[]);_lodash2.default.eq(v,'boolean')?_lodash2.default.set(h,m,_lodash2.default.concat(G,!!o)):o&&_lodash2.default.set(h,m,_lodash2.default.concat(G,v?convert({to:v,value:n}):n))}if(_lodash2.default.includes(['date','datetime-local'],l)&&_lodash2.default.set(h,m,_lodash2.default.eq(v,'string')?new Date(n).toISOString():new Date(n)),F&&A&&!B){var G=v||D.type;_lodash2.default.set(h,z,G?convert({to:G,value:A,elementType:'text'}):A)}if(F&&B){var G=[];_lodash2.default.each(E,function(H){G.push(convert({to:D.type,value:H.value,elementType:'text'}))}),D.flatten&&(G=_lodash2.default.flatten(G)),D.unique&&(G=_lodash2.default.chain(G).flatten().uniq().value()),_lodash2.default.set(h,t.name,G)}}}var d=a.elements,e=a.tagName;if('FORM'!==e)throw new Error('first argument should be a form element');var f=_lodash2.default.chain(d).map('name').compact().uniq().value(),g=_lodash2.default.pick(d,f),h=_lodash2.default.stubObject();return _lodash2.default.each(g,function(i){_lodash2.default.isArrayLikeObject(i)?_lodash2.default.each(i,trimValue):trimValue(i)}),_lodash2.default.each(g,function(i){_lodash2.default.isArrayLikeObject(i)?_lodash2.default.each(i,c):c(i)}),h};function trimValue(a){a.value=_lodash2.default.trim(a.value)}function convert(a){var b=a.to,c=a.value,d=a.decimal,e=a.separator,f=a.elementType,g={text:',',textarea:'\n'};return{string:function string(){return c},number:function number(){return _lodash2.default.round(c,d)},array:function array(){return _lodash2.default.chain(c).split(e||g[f]).compact().map(_lodash2.default.trim).value()},'[number]':function number(){return _lodash2.default.chain(c).split(e||g[f]).map(function(i){return _lodash2.default.round(i,d)}).value()}}[b](c)}exports.default=lfc;

//# sourceMappingURL=bundle.js.map